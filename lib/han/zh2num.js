"use strict";
/**
 * Created by user on 2017/12/11/011.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const chinese_parseInt = require("chinese-parseint");
const japanese = require("japanese");
exports.defaultOptions = {
    one: true,
};
exports.transcriptionConfigs = japanese.transcriptionConfigs;
exports.predefineedTranscriptionConfigs = japanese.predefineedTranscriptionConfigs;
function zh2num(str, options = {}) {
    options = Object.assign({}, exports.defaultOptions, options);
    let sa = [];
    let do_def = true;
    let jtc = japanese.transcriptionConfigs;
    let jpc = japanese.predefineedTranscriptionConfigs;
    for (let id of [
        'digits',
        'unitNames',
    ]) {
        if (Array.isArray(options[id]) && options[id].length) {
            for (let d of options[id]) {
                if (jpc[id][d]) {
                    sa = sa.concat(Object.values(jpc[id][d]));
                }
            }
        }
    }
    if (typeof options.truncateOne == 'number') {
        for (let i in jtc.default.truncateOne) {
            // @ts-ignore
            if (i < options.truncateOne) {
                sa.push(jtc.default.truncateOne[i]);
            }
        }
    }
    else if ((typeof options.truncateOne == 'undefined' || options.truncateOne === true) && sa.length) {
        sa = sa.concat(Object.values(jtc.default.truncateOne));
    }
    if (options.chars) {
        sa = sa.concat(Array.isArray(options.chars) ? options.chars : options.chars.split(''));
    }
    if (sa.length) {
        do_def = false;
    }
    sa.filter(function (value) {
        if (value.length == 1 && (value in chinese_parseInt.characters)) {
            return true;
        }
        return false;
    });
    if (do_def) {
        sa = Object.keys(chinese_parseInt.characters);
    }
    options.flags = (options.flags || 'u');
    if (options.unsafe) {
        options.flags = (options.flags || '') + 'g';
    }
    //console.log(options, sa);
    let rs = sa.join('');
    let s = str.toString();
    if (!(new RegExp('([^' + rs + '])')).test(s)) {
        return _chinese_parseInt(s, options);
    }
    else if (options.strict) {
        return Number.NaN;
    }
    let r = new RegExp('([' + rs + ']+)', options.flags);
    return s.replace(r, function (...m) {
        return _chinese_parseInt(m[1], options);
    }).toString();
}
exports.zh2num = zh2num;
function _chinese_parseInt(str, options = {}) {
    if (options.one) {
        str = str.replace(/([佰百])([一二三四五六七八九壹貳參肆伍陸柒捌玖])(?![零○〇一二三四五六七八九壹貳參肆伍陸柒捌玖拾十什])/, '$1〇$2');
    }
    let ret = chinese_parseInt(str);
    if (options.string) {
        ret = ret.toString();
    }
    return ret;
}
exports._chinese_parseInt = _chinese_parseInt;
/**
 * 將數字轉為漢字
 *
 * @param number
 * @param options
 * @returns {string}
 *
 * @example num2zh(1117) == '千百十七'
 */
function num2zh(number, options = {}) {
    let d = parseInt(number);
    if (Number.isNaN(d) || (options && options.strict && (typeof number != 'number' || d !== number))) {
        throw new TypeError(`${number} is not valid allow number`);
    }
    return japanese.transcribeNumber(d, options);
}
exports.num2zh = num2zh;
// @ts-ignore
exports.default = exports;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiemgybnVtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiemgybnVtLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7R0FFRzs7QUFFSCxxREFBcUQ7QUFDckQscUNBQXFDO0FBaUN4QixRQUFBLGNBQWMsR0FBRztJQUM3QixHQUFHLEVBQUUsSUFBSTtDQUNHLENBQUM7QUFFRCxRQUFBLG9CQUFvQixHQUFHLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQztBQUVyRCxRQUFBLCtCQUErQixHQUFHLFFBQVEsQ0FBQywrQkFBK0IsQ0FBQztBQWN4RixTQUFnQixNQUFNLENBQUMsR0FBRyxFQUFFLFVBQW9CLEVBQUU7SUFFakQsT0FBTyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLHNCQUFjLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFFckQsSUFBSSxFQUFFLEdBQWEsRUFBRSxDQUFDO0lBQ3RCLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQztJQUVsQixJQUFJLEdBQUcsR0FBRyxRQUFRLENBQUMsb0JBQW9CLENBQUM7SUFDeEMsSUFBSSxHQUFHLEdBQUcsUUFBUSxDQUFDLCtCQUErQixDQUFDO0lBRW5ELEtBQUssSUFBSSxFQUFFLElBQUk7UUFDZCxRQUFRO1FBQ1IsV0FBVztLQUNYLEVBQ0Q7UUFDQyxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFDcEQ7WUFDQyxLQUFLLElBQUksQ0FBQyxJQUFJLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFDekI7Z0JBQ0MsSUFBSSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQ2Q7b0JBQ0MsRUFBRSxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2lC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QWdCLGlCQUFpQixDQUFDLEdBQVcsRUFBRSxVQUFvQixFQUFFO0lBRXBFLElBQUksT0FBTyxDQUFDLEdBQUcsRUFDZjtRQUNDLEdBQUcsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLDREQUE0RCxFQUFFLE9BQU8sQ0FBQyxDQUFDO0tBQ3pGO0lBRUQsSUFBSSxHQUFHLEdBQUcsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLENBQUM7SUFFaEMsSUFBSSxPQUFPLENBQUMsTUFBTSxFQUNsQjtRQUNDLEdBQUcsR0FBRyxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUM7S0FDckI7SUFFRCxPQUFPLEdBQUcsQ0FBQztBQUNaLENBQUM7QUFmRCw4Q0FlQztBQUVEOzs7Ozs7OztHQVFHO0FBQ0gsU0FBZ0IsTUFBTSxDQUFDLE1BQU0sRUFBRSxVQUFlLEVBQUU7SUFFL0MsSUFBSSxDQUFDLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRXpCLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sSUFBSSxPQUFPLENBQUMsTUFBTSxJQUFJLENBQUMsT0FBTyxNQUFNLElBQUksUUFBUSxJQUFJLENBQUMsS0FBSyxNQUFNLENBQUMsQ0FBQyxFQUNqRztRQUNDLE1BQU0sSUFBSSxTQUFTLENBQUMsR0FBRyxNQUFNLDRCQUE0QixDQUFDLENBQUM7S0FDM0Q7SUFFRCxPQUFPLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDOUMsQ0FBQztBQVZELHdCQVVDO0FBRUQsYUFBYTtBQUNiLGtCQUFlLE9BQU8sQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSB1c2VyIG9uIDIwMTcvMTIvMTEvMDExLlxuICovXG5cbmltcG9ydCAqIGFzIGNoaW5lc2VfcGFyc2VJbnQgZnJvbSAnY2hpbmVzZS1wYXJzZWludCc7XG5pbXBvcnQgKiBhcyBqYXBhbmVzZSBmcm9tICdqYXBhbmVzZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSU9wdGlvbnNcbntcblx0LyoqXG5cdCAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2hha2F0YXNoaS9qYXBhbmVzZS5qcy9ibG9iL21hc3Rlci9zcmMvbnVtYmVycy5lczZcbiBcdCAqL1xuXHRkaWdpdHM/OiBzdHJpbmdbXTtcblx0LyoqXG5cdCAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2hha2F0YXNoaS9qYXBhbmVzZS5qcy9ibG9iL21hc3Rlci9zcmMvbnVtYmVycy5lczZcblx0ICovXG5cdHVuaXROYW1lcz86IHN0cmluZ1tdO1xuXG5cdC8qKlxuXHQgKiByZXBsYWNlIGFsbFxuXHQgKi9cblx0dW5zYWZlPzogYm9vbGVhbjtcblx0LyoqXG5cdCAqIFJlZ0V4cCBGbGFnc1xuXHQgKi9cblx0ZmxhZ3M/OiBzdHJpbmc7XG5cblx0Y2hhcnM/OiBzdHJpbmc7XG5cblx0dHJ1bmNhdGVPbmU/OiBudW1iZXIgfCBib29sZWFuO1xuXG5cdHN0cmljdD86IGJvb2xlYW47XG5cblx0b25lPzogYm9vbGVhbjtcblxuXHRzdHJpbmc/OiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG5cdG9uZTogdHJ1ZSxcbn0gYXMgSU9wdGlvbnM7XG5cbmV4cG9ydCBjb25zdCB0cmFuc2NyaXB0aW9uQ29uZmlncyA9IGphcGFuZXNlLnRyYW5zY3JpcHRpb25Db25maWdzO1xuXG5leHBvcnQgY29uc3QgcHJlZGVmaW5lZWRUcmFuc2NyaXB0aW9uQ29uZmlncyA9IGphcGFuZXNlLnByZWRlZmluZWVkVHJhbnNjcmlwdGlvbkNvbmZpZ3M7XG5cbi8qKlxuICog5bCH5ryi5a2X6L2J5o+b5oiQ5pW45a2XXG4gKiBQYXJzZSBDaGluZXNlL0phcGFuZXNlIG51bWVyaWMgc3RyaW5ncyB0byBpbnRlZ2VyXG4gKlxuICogQHBhcmFtIHN0clxuICogQHBhcmFtIHtJT3B0aW9uc30gb3B0aW9uc1xuICogQHJldHVybnMge3N0cmluZ3xudW1iZXJ9XG4gKlxuICogQGV4YW1wbGUgemgybnVtKCfljYPnmb7ljYHkuIMnKSA9PSAxMTE3XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB6aDJudW0oc3RyLCBvcHRpb25zPzogSU9wdGlvbnMpOiBzdHJpbmdcbmV4cG9ydCBmdW5jdGlvbiB6aDJudW0oc3RyOiBudW1iZXIsIG9wdGlvbnM/OiBJT3B0aW9ucyk6IG51bWJlclxuZXhwb3J0IGZ1bmN0aW9uIHpoMm51bShzdHIsIG9wdGlvbnM6IElPcHRpb25zID0ge30pXG57XG5cdG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XG5cblx0bGV0IHNhOiBzdHJpbmdbXSA9IFtdO1xuXHRsZXQgZG9fZGVmID0gdHJ1ZTtcblxuXHRsZXQganRjID0gamFwYW5lc2UudHJhbnNjcmlwdGlvbkNvbmZpZ3M7XG5cdGxldCBqcGMgPSBqYXBhbmVzZS5wcmVkZWZpbmVlZFRyYW5zY3JpcHRpb25Db25maWdzO1xuXG5cdGZvciAobGV0IGlkIG9mIFtcblx0XHQnZGlnaXRzJyxcblx0XHQndW5pdE5hbWVzJyxcblx0XSlcblx0e1xuXHRcdGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnNbaWRdKSAmJiBvcHRpb25zW2lkXS5sZW5ndGgpXG5cdFx0e1xuXHRcdFx0Zm9yIChsZXQgZCBvZiBvcHRpb25zW2lkXSlcblx0XHRcdHtcblx0XHRcdFx0aWYgKGpwY1tpZF1bZF0pXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRzYSA9IHNhLmNvbmNhdChPYmplY3QudmFsdWVzKGpwY1tpZF1bZF0pKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGlmICh0eXBlb2Ygb3B0aW9ucy50cnVuY2F0ZU9uZSA9PSAnbnVtYmVyJylcblx0e1xuXHRcdGZvciAobGV0IGkgaW4ganRjLmRlZmF1bHQudHJ1bmNhdGVPbmUpXG5cdFx0e1xuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0aWYgKGkgPCBvcHRpb25zLnRydW5jYXRlT25lKVxuXHRcdFx0e1xuXHRcdFx0XHRzYS5wdXNoKGp0Yy5kZWZhdWx0LnRydW5jYXRlT25lW2ldKVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRlbHNlIGlmICgodHlwZW9mIG9wdGlvbnMudHJ1bmNhdGVPbmUgPT0gJ3VuZGVmaW5lZCcgfHwgb3B0aW9ucy50cnVuY2F0ZU9uZSA9PT0gdHJ1ZSkgJiYgc2EubGVuZ3RoKVxuXHR7XG5cdFx0c2EgPSBzYS5jb25jYXQoT2JqZWN0LnZhbHVlcyhqdGMuZGVmYXVsdC50cnVuY2F0ZU9uZSkpO1xuXHR9XG5cblx0aWYgKG9wdGlvbnMuY2hhcnMpXG5cdHtcblx0XHRzYSA9IHNhLmNvbmNhdChBcnJheS5pc0FycmF5KG9wdGlvbnMuY2hhcnMpID8gb3B0aW9ucy5jaGFycyA6IG9wdGlvbnMuY2hhcnMuc3BsaXQoJycpKTtcblx0fVxuXG5cdGlmIChzYS5sZW5ndGgpXG5cdHtcblx0XHRkb19kZWYgPSBmYWxzZTtcblx0fVxuXG5cdHNhLmZpbHRlcihmdW5jdGlvbiAodmFsdWUpXG5cdHtcblx0XHRpZiAodmFsdWUubGVuZ3RoID09IDEgJiYgKHZhbHVlIGluIGNoaW5lc2VfcGFyc2VJbnQuY2hhcmFjdGVycykpXG5cdFx0e1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblxuXHRpZiAoZG9fZGVmKVxuXHR7XG5cdFx0c2EgPSBPYmplY3Qua2V5cyhjaGluZXNlX3BhcnNlSW50LmNoYXJhY3RlcnMpO1xuXHR9XG5cblx0b3B0aW9ucy5mbGFncyA9IChvcHRpb25zLmZsYWdzIHx8ICd1Jyk7XG5cblx0aWYgKG9wdGlvbnMudW5zYWZlKVxuXHR7XG5cdFx0b3B0aW9ucy5mbGFncyA9IChvcHRpb25zLmZsYWdzIHx8ICcnKSArICdnJztcblx0fVxuXG5cdC8vY29uc29sZS5sb2cob3B0aW9ucywgc2EpO1xuXG5cdGxldCBycyA9IHNhLmpvaW4oJycpO1xuXG5cdGxldCBzID0gc3RyLnRvU3RyaW5nKCk7XG5cblx0aWYgKCEobmV3IFJlZ0V4cCgnKFteJyArIHJzICsgJ10pJykpLnRlc3QocykpXG5cdHtcblx0XHRyZXR1cm4gX2NoaW5lc2VfcGFyc2VJbnQocywgb3B0aW9ucykgYXMgbnVtYmVyO1xuXHR9XG5cdGVsc2UgaWYgKG9wdGlvbnMuc3RyaWN0KVxuXHR7XG5cdFx0cmV0dXJuIE51bWJlci5OYU47XG5cdH1cblxuXHRsZXQgciA9IG5ldyBSZWdFeHAoJyhbJyArIHJzICsgJ10rKScsIG9wdGlvbnMuZmxhZ3MpO1xuXG5cdHJldHVybiBzLnJlcGxhY2UociwgZnVuY3Rpb24gKC4uLm0pXG5cdHtcblx0XHRyZXR1cm4gX2NoaW5lc2VfcGFyc2VJbnQobVsxXSwgb3B0aW9ucyk7XG5cdH0pLnRvU3RyaW5nKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfY2hpbmVzZV9wYXJzZUludChzdHI6IHN0cmluZywgb3B0aW9uczogSU9wdGlvbnMgPSB7fSlcbntcblx0aWYgKG9wdGlvbnMub25lKVxuXHR7XG5cdFx0c3RyID0gc3RyLnJlcGxhY2UoLyhb5L2w55m+XSkoW+S4gOS6jOS4ieWbm+S6lOWFreS4g+WFq+S5neWjueiys+WPg+iChuS8jemZuOafkuaNjOeOll0pKD8hW+mbtuKXi+OAh+S4gOS6jOS4ieWbm+S6lOWFreS4g+WFq+S5neWjueiys+WPg+iChuS8jemZuOafkuaNjOeOluaLvuWNgeS7gF0pLywgJyQx44CHJDInKTtcblx0fVxuXG5cdGxldCByZXQgPSBjaGluZXNlX3BhcnNlSW50KHN0cik7XG5cblx0aWYgKG9wdGlvbnMuc3RyaW5nKVxuXHR7XG5cdFx0cmV0ID0gcmV0LnRvU3RyaW5nKCk7XG5cdH1cblxuXHRyZXR1cm4gcmV0O1xufVxuXG4vKipcbiAqIOWwh+aVuOWtl+i9ieeCuua8ouWtl1xuICpcbiAqIEBwYXJhbSBudW1iZXJcbiAqIEBwYXJhbSBvcHRpb25zXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICpcbiAqIEBleGFtcGxlIG51bTJ6aCgxMTE3KSA9PSAn5Y2D55m+5Y2B5LiDJ1xuICovXG5leHBvcnQgZnVuY3Rpb24gbnVtMnpoKG51bWJlciwgb3B0aW9uczogYW55ID0ge30pOiBzdHJpbmdcbntcblx0bGV0IGQgPSBwYXJzZUludChudW1iZXIpO1xuXG5cdGlmIChOdW1iZXIuaXNOYU4oZCkgfHwgKG9wdGlvbnMgJiYgb3B0aW9ucy5zdHJpY3QgJiYgKHR5cGVvZiBudW1iZXIgIT0gJ251bWJlcicgfHwgZCAhPT0gbnVtYmVyKSkpXG5cdHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKGAke251bWJlcn0gaXMgbm90IHZhbGlkIGFsbG93IG51bWJlcmApO1xuXHR9XG5cblx0cmV0dXJuIGphcGFuZXNlLnRyYW5zY3JpYmVOdW1iZXIoZCwgb3B0aW9ucyk7XG59XG5cbi8vIEB0cy1pZ25vcmVcbmV4cG9ydCBkZWZhdWx0IGV4cG9ydHM7XG4iXX0=